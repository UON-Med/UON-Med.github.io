<!DOCTYPE html>
<html lang="en">
<head>
  <title>Joint Medical Program</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="theme-color" content="#263238" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <link rel="manifest" href="manifest.json">
  <link rel="shortcut icon" href="favicon.ico" />

  <!-- CSS  -->
  <link href="css/icons.css" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/common.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/dareton.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body>
  <!-- Nav bar -->
  <div class="navbar-fixed" data-include="header"><nav class="nav-extended blue-grey darken-4" role="navigation"><div class="nav-wrapper container"></div><div class="nav-content container"><ul class="tabs tabs-transparent"></ul></div></div>

  <!-- FAB -->
  <div class="fixed-action-btn">
    <a class="btn-floating btn-large blue-grey waves-effect waves-light darken-4">
      <i class="large material-icons">mode_edit</i>
    </a>
    <ul>
      <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
      <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
      <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
      <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
    </ul>
  </div>

  <div id="tab1" data-tab="Intro" class="col s12">
    <div class="section no-pad-bot">
      <div class="container">
        <br><br>
        <h1 class="header center grey-text text-darken-4">Dareton Diabetes Camp</h1>
        <div class="row center">
          <h5 class="header col s12 light">A Coomealla Health Aboriginal Corporation (CHAC) initiative</h5>
        </div>
        <div class="row center">
          <a href="https://www.chacams.org/" id="download-button" class="btn-large waves-effect waves-light grey darken-4">CHAC Website</a>
        </div>
        <br><br>
      </div>
    </div>
  </div>

  <div id="tab2" data-tab="Community" class="col s12">
    <div class="section no-pad-bot">
      <div class="container">
        <h2 class="header center grey-text text-darken-4">Community demographics</h2>
        <div class="row center">
          <h5 class="header col s12 light">Location</h5>
          <div id="map" class="col s12" style="height: 500px;"></div>
        </div>

        <div class="row center">
          <div class="col s12 m6">
            <h5 class="header col s12 light">Ethnic/Gender profile</h5>
            <div class="canvas-container">
              <canvas id="pie-area"></canvas>
            </div>
            <div class="switch" style="margin-top: 75px;">
              <label>
                Dareton
                <input type="checkbox" onclick="pieToggleData()">
                <span class="lever"></span>
                Australia
              </label>
            </div>
            <br></br>
          </div>

          <div class="col s12 m6">
            <h5 class="header col s12 light">Dareton Age profile</h5>
            <div class="canvas-container">
              <canvas id="pop-area"></canvas>
            </div>
            <div class="switch" style="margin-top: 75px;">
              <label>
                Indigenous
                <input type="checkbox" onclick="popToggleData()">
                <span class="lever"></span>
                Non-Indigenous
              </label>
            </div>
            <br></br>
          </div>
        </div>

      </div>
      <br><br>
    </div>
  </div>

      <!-- <div class="gallery-wrapper"> -->
        <!-- <img class="materialboxed" width="100%" src="images/bar-beach.jpg"> -->
      <!-- </div> -->
  <div id="tab3" data-tab="To do" class="col s12">
    
  </div>

  <div data-include="footer"></div>

  <!--  Scripts-->
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/materialize.min.js"></script>
  <script src="js/common.js"></script>
  <script src="js/dareton.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
  <script>
    var map;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: -34.0943674, lng: 142.0400808},
        zoom: 13,
      });
    }


    var randomScalingFactor = function() {
      return Math.round(Math.random() * 100);
    };

    var daretonPieData = [143, 119, 95, 97];
    var nationalPieData = [11224467, 11528252, 322171, 326996];

    var configPie = {
      type: 'pie',
      data: {
        datasets: [{
          data: daretonPieData,
          backgroundColor: [
            'rgba(109, 158, 235, 1)',
            'rgba(164, 194, 244, 1)',
            'rgba(224, 102, 102, 1)',
            'rgba(234, 153, 153, 1)',
          ],
          label: 'Dareton'
        }],
        labels: [
          'Non-indigenous (M)',
          'Non-indigenous (F)',
          'Indigenous (M)',
          'Indigenous (F)',
        ]
      },
      options: {
        maintainAspectRatio: false,
        // responsive: true,
      }
    };

    function pieToggleData() {
      if(myPie.data.datasets[0].label == "Dareton") {
        myPie.data.datasets[0].data = nationalPieData;
        myPie.data.datasets[0].label = "Australia";
      } else {
        myPie.data.datasets[0].data = daretonPieData;
        myPie.data.datasets[0].label = "Dareton";
      }
      myPie.update();
    }

    function clone(hash) {
      var json = JSON.stringify(hash);
      var object = JSON.parse(json);

      return object;
    }


    var indigenousPopData = [{
      type: 'horizontalBar',
      label: 'Male (ATSI)',
      backgroundColor: 'rgba(224, 102, 102, 1)',
      data: [-10, -11, -34, -17, -15, -19],
    }, {
      type: 'horizontalBar',
      label: 'Female (ATSI)',
      backgroundColor: 'rgba(109, 158, 235, 1)',
      data: [3, 17, 34, 19, 13, 3],
    }];
    var nIndigenousPopData = [{
      type: 'horizontalBar',
      label: 'Male (non-ATSI)',
      backgroundColor: 'rgba(224, 102, 102, 1)',
      data: [-48, -44, -23, -17, -8, -4],
    }, {
      type: 'horizontalBar',
      label: 'Female (non-ATSI)',
      backgroundColor: 'rgba(109, 158, 235, 1)',
      data: [44, 40, 18, 6, 11, 4],
    }];

    var configPop = {
        type: 'horizontalBar',
        data: {
          datasets: clone(indigenousPopData),
          labels: [
            '>65 yrs',
            '45-64 yrs',
            '25-44 yrs',
            '15-24 yrs',
            '5-14 yrs',
            '0-4 yrs',
          ]
        },
        options: {
            maintainAspectRatio: false,
            // responsive: true,
            scales: {
                xAxes: [{
                    stacked: true
                }],
                yAxes: [{
                    stacked: true
                }]
            }
        }
    }

    function popToggleData() {
      var currDataset = myPop.data.datasets;
      if(currDataset[0].label == "Male (ATSI)") {
        // myPop.data.datasets = nIndigenousPopData;
        var newDataset = nIndigenousPopData;
      } else {
        // myPop.data.datasets = indigenousPopData;
        var newDataset = indigenousPopData;
      }
      // Does swap
      for(var i = 0; i < currDataset.length; i++) {
        myPop.data.datasets[i].data = newDataset[i].data;
        myPop.data.datasets[i].label = newDataset[i].label;
      }
      myPop.update();
    }



    $(document).ready(function() {
      var ctxPie = document.getElementById('pie-area').getContext('2d');
      window.myPie = new Chart(ctxPie, configPie);

      var ctxPop = document.getElementById('pop-area').getContext('2d');
      window.myPop = new Chart(ctxPop, configPop);
    });
  
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD1UQT5GWfKb0HcDGaZ21kAL-ksv89hd0g&callback=initMap"
  async defer></script>
  </body>
</html>
